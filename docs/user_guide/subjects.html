
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Subjects &#8212; BPt 2.2.2 documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/getting_started.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/pandas.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Pipeline Objects" href="pipeline_objects.html" />
    <link rel="prev" title="Loading Fake Timeseries Surface Data" href="load_timeseries_example.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../index.html">
  <img src="../_static/red_logo.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../installation/index.html">
  Installation
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  User Guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../reference/index.html">
  API reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../options/index.html">
  Default Options
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../change_log/index.html">
  Change Log
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../cite/index.html">
  Cite BPt
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/sahahn/BPt" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/SageHahn11" rel="noopener" target="_blank" title="Twitter"><span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="why_bpt.html">
   Why BPt?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="loading_data.html">
   Loading Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="saving_data.html">
   Saving Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="test_split.html">
   Test Split
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="role.html">
   Role
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="scope.html">
   Scope
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="data_types.html">
   Data Types
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="data_files.html">
   Data Files
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="load_timeseries_example.html">
     Loading Fake Timeseries Surface Data
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Subjects
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="pipeline_objects.html">
   Pipeline Objects
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="params.html">
   Params
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="extra_params.html">
   Extra Params
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="bmi_full_example.html">
   Predict BMI
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dep_full_example.html">
   Predicting Substance Dependence from Multi-Site Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ssrt.html">
   Predict Stop Signal Response Time (SSRT)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="waist_cm.html">
   Predict Waist Circumference with Diffusion Weighted Imaging
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="sex.html">
   Predict Sex
  </a>
 </li>
</ul>

  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#array-like">
   1. array-like
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#location">
   2. location
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#reserved-keyword">
   3. reserved keyword
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#value-subset-case">
   4. value subset case
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#multi-index-array-like">
   6. multi-index array-like
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#examples">
   Examples
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="subjects">
<span id="id1"></span><h1>Subjects<a class="headerlink" href="#subjects" title="Permalink to this headline">#</a></h1>
<p>Various functions within BPt, and <a class="reference internal" href="../reference/api/BPt.Dataset.html#BPt.Dataset" title="BPt.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> can accept subjects or some variation on this
name as an argument. The parameter can accept a few different values. These are explained below:</p>
<section id="array-like">
<h2>1. array-like<a class="headerlink" href="#array-like" title="Permalink to this headline">#</a></h2>
<p>You may pass any array-like (e.g., list, set, pandas Index, etc…) of subjects directly.
Warning: Passing a python tuple is reserved for a special MultiIndex case!</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">subjects</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;subj1&#39;</span><span class="p">,</span> <span class="s1">&#39;subj2&#39;</span><span class="p">,</span> <span class="s1">&#39;subj3&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Would select those three subjects, where the list could also be a numpy array or pandas index for example.</p>
</section>
<section id="location">
<h2>2. location<a class="headerlink" href="#location" title="Permalink to this headline">#</a></h2>
<p>You may pass the location of a text file were subject’s names are stored as one subject’s
name per line. Names should be saved with python style types, e.g., quotes around str’s, but
if they are not, it should in most cases still be able to figure out the correct type.
For example if subjects.txt contained:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;subj1&#39;</span>
<span class="s1">&#39;subj2&#39;</span>
<span class="s1">&#39;subj3&#39;</span>
</pre></div>
</div>
<p>We could pass:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">subjects</span> <span class="o">=</span> <span class="s1">&#39;subjects.txt&#39;</span>
</pre></div>
</div>
<p>To select those three subjects.</p>
</section>
<section id="reserved-keyword">
<h2>3. reserved keyword<a class="headerlink" href="#reserved-keyword" title="Permalink to this headline">#</a></h2>
<p>A reserved key word may be passed. These include:</p>
<ul class="simple">
<li><p>‘all’
Operate on all subjects</p></li>
<li><p>‘nan’
Select any subjects with any missing values in any of their loaded columns,
regardless of scope or role.</p></li>
<li><p>‘train’
Select the set of train subjects as defined by a split in the Dataset, e.g.,
<a class="reference internal" href="../reference/api/BPt.Dataset.set_train_split.html#BPt.Dataset.set_train_split" title="BPt.Dataset.set_train_split"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_train_split</span></code></a>.</p></li>
<li><p>‘test’
Select the set of test subjects as defined by a split in the Dataset, e.g.,
<a class="reference internal" href="../reference/api/BPt.Dataset.set_test_split.html#BPt.Dataset.set_test_split" title="BPt.Dataset.set_test_split"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_test_split</span></code></a>.</p></li>
<li><p>‘default’
This is the default subjects value for <a class="reference internal" href="../reference/api/BPt.ProblemSpec.html#BPt.ProblemSpec" title="BPt.ProblemSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProblemSpec</span></code></a>,
it refers to special behavior where when evaluating if the passed dataset has
a train/test split defined, and a cv value is passed that isn’t ‘test’, then
subjects = ‘train’ will be used. Otherwise, subjects=’all’ will be used.</p></li>
</ul>
</section>
<section id="value-subset-case">
<h2>4. value subset case<a class="headerlink" href="#value-subset-case" title="Permalink to this headline">#</a></h2>
<p>You can pass the special input wrapper <a class="reference internal" href="../reference/api/BPt.ValueSubset.html#BPt.ValueSubset" title="BPt.ValueSubset"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValueSubset</span></code></a>. This can be
used to select subsets of subject by a column’s
value or values. See <a class="reference internal" href="../reference/api/BPt.ValueSubset.html#BPt.ValueSubset" title="BPt.ValueSubset"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValueSubset</span></code></a> for more
information on how this input class is used.</p>
<p>5. multi-index case
There also exists the case where you may wish for the underlying index of subjects to be a MultiIndex.
In this case, there is some extra functionality to discuss.
Say for example we have a Dataset multi-indexed
by subject and eventname, e.g.,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s1">&#39;subject&#39;</span><span class="p">,</span> <span class="s1">&#39;eventname&#39;</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>We now have more options for how we might want to index this dataset, and therefore more options
for valid arguments to pass to a subjects argument. Consider first all of the examples from above,
where we are just specifying a subject-like index. In this case,
all of those arguments will still work, and will just return all subjects
with all of their eventnames. E.g., assuming there were two eventname values
for each subjects ‘e1’ and ‘e2’:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">subjects</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;subj1&#39;</span><span class="p">,</span> <span class="s1">&#39;subj2&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Would select subject eventname pairs:
(‘subj1’, ‘e1’), (‘subj1’, ‘e2’), (‘subj2’, ‘e1’), (‘subj2’, ‘e2’)
and likewise with loading from a text file which just specified ‘subj1’ and ‘subj2’.</p>
<p>Note that if we pass arguments in this manner, BPt will assume they refer to whatever
index is first, in this case ‘subject’, and not ‘eventname’. If we wish to also select
explicitly by eventname, we have two options.</p>
</section>
<section id="multi-index-array-like">
<h2>6. multi-index array-like<a class="headerlink" href="#multi-index-array-like" title="Permalink to this headline">#</a></h2>
<p>You may pass fully indexed tuples in an array-like manner, the same as 1. from before, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">subjects</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;subj1&#39;</span><span class="p">,</span> <span class="s1">&#39;e1&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;subj2&#39;</span><span class="p">,</span> <span class="s1">&#39;e2&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>To just keep ‘subj1’ at event ‘e1’ and ‘subj2’ at ‘e2’. Likewise, we
could select this same subset if subjects.txt was formatted as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="s1">&#39;subj1&#39;</span><span class="p">,</span> <span class="s1">&#39;e1&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;subj2&#39;</span><span class="p">,</span> <span class="s1">&#39;e2&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Our second option is to use the special tuple reserved input. In this case,
we must pass a python tuple with the same length at the number of levels in the
underlying MultiIndex, e.g., in the example before, of length two. Each index in the
tuple will then be used to specify the BPt subjects compatible argument for just that
level of the index. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">subjects</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;e1&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Would select all subjects, and then note the array-like list in the second index of the tuple,
would filter that to include only subject eventname
pairs with an eventname of ‘e1’. Consider another example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">subjects</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;subjects.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;events.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>In this case, the subjects to select would be loaded from
‘subjects.txt’ and the corresponding eventnames from
‘events.txt’.</p>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">#</a></h2>
<p>First let’s define an example dataset to show some examples with.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">import</span> <span class="nn">BPt</span> <span class="k">as</span> <span class="nn">bp</span>

<span class="gp">In [2]: </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="gp">In [3]: </span><span class="n">data</span> <span class="o">=</span> <span class="n">bp</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>

<span class="gp">In [4]: </span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;subj1&#39;</span><span class="p">,</span> <span class="s1">&#39;subj2&#39;</span><span class="p">,</span> <span class="s1">&#39;subj3&#39;</span><span class="p">]</span>

<span class="gp">In [5]: </span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;col1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]</span>

<span class="gp">In [6]: </span><span class="n">data</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="gp">In [7]: </span><span class="n">data</span>
<span class="gh">Out[7]: </span><span class="go"></span>
<span class="go">       col1</span>
<span class="go">index      </span>
<span class="go">subj1   1.0</span>
<span class="go">subj2   2.0</span>
<span class="go">subj3   NaN</span>
</pre></div>
</div>
<p>Next, we will use <a class="reference internal" href="../reference/api/BPt.Dataset.get_subjects.html#BPt.Dataset.get_subjects" title="BPt.Dataset.get_subjects"><code class="xref py py-func docutils literal notranslate"><span class="pre">Dataset.get_subjects()</span></code></a> to explore what passing
different values to <cite>subjects</cite> will return.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="n">data</span><span class="o">.</span><span class="n">get_subjects</span><span class="p">(</span><span class="n">subjects</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;subj1&#39;</span><span class="p">])</span>
<span class="gh">Out[8]: </span><span class="go">{&#39;subj1&#39;}</span>

<span class="gp">In [9]: </span><span class="n">data</span><span class="o">.</span><span class="n">get_subjects</span><span class="p">(</span><span class="n">subjects</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;subj1&#39;</span><span class="p">,</span> <span class="s1">&#39;subj2&#39;</span><span class="p">])</span>
<span class="gh">Out[9]: </span><span class="go">{&#39;subj1&#39;, &#39;subj2&#39;}</span>
</pre></div>
</div>
<p>One gotcha is that if we pass a single str value, it will be assumed to
be a file path, so if we pass subjects=’subj1’, we will get an error.
Let’s try using <a class="reference internal" href="../reference/api/BPt.ValueSubset.html#BPt.ValueSubset" title="BPt.ValueSubset"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValueSubset</span></code></a> next.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [10]: </span><span class="n">data</span><span class="o">.</span><span class="n">get_subjects</span><span class="p">(</span><span class="n">bp</span><span class="o">.</span><span class="n">ValueSubset</span><span class="p">(</span><span class="s1">&#39;col1&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="gh">Out[10]: </span><span class="go">{&#39;subj1&#39;}</span>

<span class="gp">In [11]: </span><span class="n">data</span><span class="o">.</span><span class="n">get_subjects</span><span class="p">(</span><span class="n">bp</span><span class="o">.</span><span class="n">ValueSubset</span><span class="p">(</span><span class="s1">&#39;col1&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]))</span>
<span class="gh">Out[11]: </span><span class="go">{&#39;subj1&#39;, &#39;subj2&#39;}</span>
</pre></div>
</div>
<p>We can also use special reversed keywords.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [12]: </span><span class="n">data</span><span class="o">.</span><span class="n">get_subjects</span><span class="p">(</span><span class="s1">&#39;nan&#39;</span><span class="p">)</span>
<span class="gh">Out[12]: </span><span class="go">{&#39;subj3&#39;}</span>
</pre></div>
</div>
</section>
</section>


              </div>
              
              
          </main>
          

      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2020-2022.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.2.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>